<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:define name="head">
        <style type="text/css">
            .cars-datalist .text-column p:last-child{
                color:#757575;
            }

            .cars-datalist .car-item {
                padding: 8px 14px;
            }

            .cars-datalist .car-item img, .cars-datalist .car-item .car-details {
                display: inline-block;
                vertical-align: middle;
                margin-right: 14px;
            }

            .cars-datalist .car-item button {
                float: right;
            }

            .cars-datalist ul {
                margin: 0;
                padding: 0;
            }

            .ui-car-display td:last-child {
                font-weight: 700;
            }

            @media (max-width:640px) {
                .cars-datalist .text-column {
                    text-align: center;
                }
            }
        </style>
    </ui:define>

    <ui:define name="title">Data</ui:define>

    <ui:define name="viewname">Data</ui:define>

    <ui:define name="content">
        <h:form id="formPaquete">
            <div class="ui-g">

                <div class="ui-g-12">
                    <div class="card card-w-title">
                        <h1>Muebles</h1>
                        <p:carousel value="#{paqueteBean.Muebles}" headerText="Muebles" var="paquete" itemStyle="text-align:center" responsive="true">
                            <p:panelGrid columns="2" style="width:100%;margin:10px 0px" columnClasses="label,value" layout="grid" styleClass="ui-panelgrid-blank">
                                <f:facet name="header">
                                    <p:graphicImage library="imagenesProductos" name="#{paquete.foto}"
                                                    style="width:280px"/>
                                </f:facet>

                                <p:commandButton icon="fa fa-search" update="informacionPaquete,pnlInsertarPaquete" actionListener="#{paqueteBean.verInformacionPaquete(paquete.idPaquete)}" />

                                <br/>

                                <h:outputText value="Nombre: " />
                                <h:outputText value="#{paquete.nombre}" />

                                <h:outputText value="Clasificacion: " />
                                <h:outputText value="#{paquete.clasificacionVO.nombre}" />

                                <h:outputText value="Descripcion: " />
                                <h:outputText value="#{paquete.descripcion}" />

                                <h:outputText value="Lugar: " />
                                <h:outputText value="#{paquete.lugarVO.nombre}" />

                                <h:outputText value="Cantidad de personas: " />
                                <h:outputText value="#{paquete.cantidadPersonas}" />

                                <h:outputText value="Precio: " />
                                <h:outputText value="#{paquete.precio}" />

                                <h:outputText value="PDF: " />
                                <h:outputText value="#{paquete.pdf}" />
                            </p:panelGrid>
                        </p:carousel>
                    </div>
                </div>
            </div>            
        </h:form>

        <div class="ui-g">
            <div class="ui-g-12 ui-lg-6">
                <!-- Left colum -->
                <div class="card">
                    <h1>Información Paquete</h1>
                    <p:panel id="informacionPaquete"  toggleable="true">
                        <c:if test="#{opcionBean.opcionInfoPaquete == 1 }">
                            <h:form >
                                <p:row>
                                    <h:outputLabel for="name" value="Nombre" style="font-weight:bold"/>
                                    <p:inputText id="name" value="#{paqueteBean.nombre}" required="true" label="Name"/>
                                    <p:message for="name" />
                                    <h:outputText value="#{paqueteBean.nombre}" />                                         
                                </p:row>
                                <br/>
                                <br/>

                                <p:row>
                                    <p:column>
                                        <h:outputText value="Clasificacion " />
                                    </p:column>
                                    <br/>
                                    <p:column>
                                        <p:selectOneMenu
                                            value="#{paqueteBean.selectedClasificacion}"
                                            style="width:150px">
                                            <f:selectItem itemLabel="Selecione clasificaci�n" itemValue=""
                                                          noSelectionOption="true" />
                                            <f:selectItems var="c"
                                                           value="#{paqueteBean.clasificaciones}"
                                                           itemValue="#{c.idClasificacion}"
                                                           itemLabel="#{c.nombre}" />
                                        </p:selectOneMenu>     
                                    </p:column>
                                </p:row>

                                <br/>
                                <br/>

                                <p:row>
                                    <p:column>
                                        <h:outputText value="Descripcion " />
                                    </p:column>
                                    <br/>
                                    <p:column>
                                        <p:inputText value="#{paqueteBean.descripcion}" />
                                    </p:column>                
                                </p:row>

                                <br/>
                                <br/>  

                                <p:row>
                                    <p:column>
                                        <h:outputText value="Lugar " />
                                    </p:column>
                                    <br/>
                                    <p:column>
                                        <p:selectOneMenu
                                            value="#{paqueteBean.selectedLugar}"
                                            style="width:150px">
                                            <f:selectItem itemLabel="Selecione el lugar" itemValue=""
                                                          noSelectionOption="true" />
                                            <f:selectItems var="l"
                                                           value="#{paqueteBean.lugares}"
                                                           itemValue="#{l.idLugar}"
                                                           itemLabel="#{l.nombre}" />
                                        </p:selectOneMenu>     
                                    </p:column>
                                </p:row>

                                <br/>
                                <br/>

                                <p:row>
                                    <p:column>
                                        <h:outputText value="Cantidad Personas: " />
                                    </p:column>
                                    <br/>
                                    <p:column>  
                                        <p:inputNumber id="cantidadProducto" value="#{paqueteBean.cantidadPersonas}" decimalPlaces="0"/>
                                    </p:column>
                                </p:row>

                                <br/>
                                <br/>

                                <p:row>
                                    <p:column>
                                        <h:outputText value="Precio: " />
                                    </p:column>
                                    <br/>
                                    <p:column>  
                                        <p:inputNumber id="precioProducto" value="#{paqueteBean.precio}" 
                                                       decimalPlaces="0"/>
                                    </p:column>
                                </p:row>

                                <br/>
                                <br/>

                                <p:row>
                                    <p:column>
                                        <p:graphicImage library="imagenesProductos" name="#{paqueteBean.nombrePdf}"
                                                        style="width:280px"/>
                                        <br/>
                                        <h:outputText value="PDF: " />
                                    </p:column>
                                    <br/>
                                    <p:column>
                                        <p:fileUpload value="#{paqueteBean.pdf}"
                                                      auto="true"
                                                      mode="advanced"
                                                      fileUploadListener="#{archivoBean.fileUploadListenerFoto}"
                                                      skinSimple="true" />
                                    </p:column>                
                                </p:row>

                                <br/>
                                <br/>

                                <p:row>
                                    <p:column>
                                        <p:graphicImage library="imagenesProductos" name="#{paqueteBean.nombreFoto}"
                                                        style="width:280px"/>
                                        <br/>
                                        <h:outputText value="Foto: " />
                                    </p:column>
                                    <br/>
                                    <p:column>
                                        <p:fileUpload value="#{paqueteBean.foto}"
                                                      auto="true"
                                                      mode="advanced"
                                                      fileUploadListener="#{archivoBean.fileUploadListenerFoto}"
                                                      skinSimple="true" />
                                    </p:column>                
                                </p:row>

                            </h:form>                            
                        </c:if>
                    </p:panel>
                </div>
            </div>

            <div class="ui-g">
                <div class="ui-g-12">
                    <!-- Left colum -->
                    <div class="card">
                        <script type="text/javascript">
                            function handleDrop(event, ui) {
                                var droppedCar = ui.draggable;

                                droppedCar.fadeOut('fast');
                            }
                        </script>

                        <p:panel id="pnlInsertarPaquete">
                            <c:if test="#{opcionBean.opcionInfoPaquete == 1 }">
                                <h:form enctype="multipart/form-data" id="insertarPaquete">
                                    <p:fieldset id="availableProductosField" legend="Productos" >
                                        <p:dataGrid paginator="true"  rows="4" id="availableProductos" var="producto" value="#{paqueteBean.productos}" columns="2">
                                            <p:panel id="pnl" header="#{producto.nombre}" style="text-align:center">
                                                <h:panelGrid columns="1" style="width:50%">
                                                    <p:graphicImage library="imagenesProductos" name="#{producto.foto}"
                                                                    style="width:100px"/>
                                                </h:panelGrid>
                                            </p:panel>

                                            <p:draggable for="pnl" revert="true" handle=".ui-panel-titlebar" stack=".ui-panel"/>
                                        </p:dataGrid>
                                    </p:fieldset>

                                    <p:droppable for="selectedProductos" tolerance="touch" activeStyleClass="ui-state-highlight" datasource="availableProductos" onDrop="handleDrop">
                                        <p:ajax listener="#{paqueteBean.onDrop}" update="dropArea availableProductos" />
                                    </p:droppable>

                                    <p:fieldset id="selectedProductos" legend="Selected" style="margin-top:20px">
                                        <p:outputPanel id="dropArea">
                                            <h:outputText value="!!!Arrastre aqui!!!" rendered="#{empty paqueteBean.droppedProductos}" style="font-size:24px;" />
                                            <p:dataTable id="selectedProductosTable" var="producto" value="#{paqueteBean.droppedProductos}" rendered="#{not empty paqueteBean.droppedProductos}">

                                                <p:column headerText="Foto">
                                                    <p:graphicImage library="imagenesProductos" name="#{producto.foto}"
                                                                    style="width:100px"/>
                                                </p:column>                            
                                                <p:column headerText="Id">
                                                    <h:outputText value="#{producto.idProducto}" />
                                                </p:column>
                                                <p:column headerText="Nombre Producto">
                                                    <h:outputText value="#{producto.nombre}" />
                                                </p:column>
                                                <p:column headerText="Precio Unidad">
                                                    <h:outputText value="#{producto.precioUnidad}" />
                                                </p:column>
                                            </p:dataTable>
                                        </p:outputPanel>
                                    </p:fieldset>

                                </h:form>
                            </c:if>
                        </p:panel>

                    </div>
                </div>
            </div>

            <div class="ui-g-12 ui-lg-6">
                <!-- Right colum -->
                <div class="card">
                    <h1>Cotizar Paquete</h1>
                    <h:form id="insertarDatosClientePaquete">
                        <p:growl id="growl" showDetail="true" sticky="true" />
                        <p:panel id="insertarDatosClientePaquete">
                            <f:facet name="header">
                                <h:outputText value="Enviar Solicitud" />
                            </f:facet>

                            <p:row>
                                <p:column>
                                    <h:outputText value="Nombre Cliente: " />
                                </p:column>
                                <br/>
                                <p:column>
                                    <p:inputText id="nombre" value="#{solicitudBean.nombreCliente}" 
                                                 required="true" label="nombre" size="40"
                                                 requiredMessage="Por favor diligencie el nombre.">
                                    </p:inputText>
                                    <p:message for="nombre" />
                                </p:column>                
                            </p:row>

                            <br/>
                            <br/>

                            <p:row>
                                <p:column>
                                    <h:outputText value="Cantidad personas: " />
                                </p:column>
                                <br/>
                                <p:column>
                                    <p:inputNumber id="cantPersonas" value="#{solicitudBean.cantidadPersonas}"  decimalPlaces="0"
                                                   required="true" label="Cantidad de personas" size="40"
                                                   requiredMessage="Por favor diligencie la cantidad de personas">
                                    </p:inputNumber>                                    
                                    <p:message for="cantPersonas" />
                                </p:column>                
                            </p:row>

                            <br/>
                            <br/>

                            <p:row>
                                <p:column>
                                    <h:outputText value="Telefono: " />
                                </p:column>
                                <br/>
                                <p:column>
                                    <p:inputText id="telefono" value="#{solicitudBean.telefono}" 
                                                 required="true" label="Telefono" size="40"
                                                 requiredMessage="Por favor diligencie el telefono">
                                    </p:inputText>
                                    <p:message for="telefono" />
                                </p:column>                
                            </p:row>

                            <br/>
                            <br/>

                            <p:row>
                                <p:column>
                                    <h:outputText value="Email: " />
                                </p:column>
                                <br/>
                                <p:column>
                                    <p:inputText id="email" value="#{solicitudBean.email}" 
                                                 required="true" label="email" size="40"
                                                 requiredMessage="Por favor diligencie el email."
                                                 validatorMessage="Formato invalido">
                                        <f:validateRegex
                                            pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                                    </p:inputText>
                                    <p:message for="email" />
                                </p:column>                
                            </p:row>

                            <br/>
                            <br/>

                            <p:row>
                                <p:column>
                                    <h:outputText value="Hora: " />
                                </p:column>
                                <br/>
                                <p:column>
                                    <p:calendar value="#{solicitudBean.hora}" pattern="HH:mm" 
                                                timeOnly="true"  />
                                </p:column>                
                            </p:row>

                            <br/>
                            <br/>

                            <p:row>
                                <p:column>
                                    <h:outputText value="Fecha: " />
                                </p:column>
                                <br/>
                                <p:column>
                                    <p:calendar value="#{solicitudBean.fecha}" />
                                </p:column>                
                            </p:row>

                            <br/>
                            <br/>

                            <p:row>
                                <p:column>
                                    <h:outputText value="Observaciones " />
                            </p:column>
                            <br/>
                            <p:column>
                                <p:inputTextarea id="observaciones" value="#{solicitudBean.observaciones}"  
                                                 style="width:400px" cols="30" maxlength="800" 
                                                 required="true" label="Observaciones" 
                                                 requiredMessage="Por favor diligencie las observaciones">
                                </p:inputTextarea>
                                <p:message for="observaciones" />
                            </p:column>                
                        </p:row>

                        <br/>
                        <br/>

                        <p:commandButton value="Eniviar solicitud " 
                                         actionListener="#{solicitudBean.insertarSolicitud}"
                                         update="growl"
                                         icon="fa fa-send" >
                        </p:commandButton>
                    </p:panel>
                </h:form>
            </div>
        </div>

    </div>
</ui:define>
</ui:composition>